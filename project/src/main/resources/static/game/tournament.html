<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>디저트 월드컵</title>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #ffe6e6;
      text-align: center;
      padding: 20px;
    }
    .container {
      max-width: 600px;
      margin: auto;
      padding: 20px;
      background: #fff0f5;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      font-size: 36px;
      color: #ff6b81;
      margin-bottom: 30px;
    }

    .result-container {
      font-size: 24px;
      color: #ff6b81;
      margin-top: 20px;
      padding: 20px;
      background-color: #ffd1dc;
      border-radius: 10px;
    }
    .button {
      padding: 10px 20px;
      margin: 10px;
      background-color: #ff66b2;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      transition: 0.3s;
    }
    .button:hover {
      background-color: #ff85c2;
    }
    .result-container {
      display: none;
    }
    .iframe-popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 400px;
      height: 300px;
      background-color: white;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      border-radius: 10px;
      z-index: 1000;
    }
    .iframe-popup iframe {
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 10px;
    }
    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: #ff66b2;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      padding: 5px 10px;
    }
  </style>
</head>
<body>
  <div id="game-container" class="container">
    <h1>디저트 월드컵</h1>
    <p>두 개의 디저트 중 하나를 선택하세요!</p>
    <div id="round-text"></div>
    <div id="pair-container"></div>
  </div>

  <div id="result-container" class="container result-container">
    <h1>최종 선택된 디저트</h1>
    <h2 id="result-text"></h2>
    <button id="retry-button" class="button">다시 하기</button>
    <button id="share-button" class="button">공유하기</button>
  </div>

  <!-- 공유 팝업 -->
  <div class="iframe-popup" id="share-popup">
    <button class="close-btn" id="close-popup">X</button>
    <iframe src="../sns.html"></iframe>
  </div>

  <script>
    let desserts = [
      { name: '초콜릿 케이크', emoji: '🍰' },
      { name: '딸기 마카롱', emoji: '🍓' },
      { name: '블루베리 타르트', emoji: '🍇' },
      { name: '치즈 케이크', emoji: '🍨' },
      { name: '크로와상', emoji: '🥐' },
      { name: '티라미수', emoji: '☕' },
      { name: '팬케이크', emoji: '🥞' },
      { name: '푸딩', emoji: '🍮' },
      { name: '도넛', emoji: '🍩' },
      { name: '초코칩 쿠키', emoji: '🍪' },
      { name: '와플', emoji: '🧇' },
      { name: '파르페', emoji: '🍧' },
      { name: '에클레어', emoji: '🍰' },
      { name: '무스 케이크', emoji: '🎂' },
      { name: '젤라또', emoji: '🍦' },
      { name: '마카롱', emoji: '🍬' }
    ];

    let currentIndex = 0;
    let round = 1;
    let selectedDesserts = [];

    function startGame() {
      if (desserts.length === 1) {
        showFinalResult(desserts[0]);
        return;
      }

      const roundText = document.getElementById('round-text');
      roundText.textContent = `${round} 라운드 (${desserts.length}강)`;
      showNextPair();
    }

    function showNextPair() {
      const pairContainer = document.getElementById('pair-container');
      pairContainer.innerHTML = '';

      const dessert1 = desserts[currentIndex];
      const dessert2 = desserts[currentIndex + 1];

      const button1 = createButton(dessert1);
      const button2 = createButton(dessert2);

      pairContainer.appendChild(button1);
      pairContainer.appendChild(button2);
    }

    function createButton(dessert) {
      const button = document.createElement('button');
      button.classList.add('button');
      button.textContent = `${dessert.emoji} ${dessert.name}`;
      button.addEventListener('click', () => {
        selectedDesserts.push(dessert);
        nextPair();
      });
      return button;
    }

    function nextPair() {
      currentIndex += 2;

      if (currentIndex >= desserts.length) {
        desserts = selectedDesserts;
        selectedDesserts = [];
        currentIndex = 0;
        round++;
        startGame();
      } else {
        showNextPair();
      }
    }

    function showFinalResult(dessert) {
      document.getElementById('result-text').textContent = `${dessert.name} (${dessert.emoji})`;
      document.getElementById('game-container').style.display = 'none';
      document.getElementById('result-container').style.display = 'block';
    }

    // 다시 하기 버튼
    document.getElementById('retry-button').addEventListener('click', () => location.reload());

    // 공유하기 버튼
    document.getElementById('share-button').addEventListener('click', () => {
      document.getElementById('share-popup').style.display = 'block';
    });

    // 팝업 닫기 버튼
    document.getElementById('close-popup').addEventListener('click', () => {
      document.getElementById('share-popup').style.display = 'none';
    });

    startGame();
  </script>
</body>
</html>